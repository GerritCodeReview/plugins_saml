{
  "comments": [
    {
      "key": {
        "uuid": "df1a8f34_17284c44",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-04-12T15:38:04Z",
      "side": 1,
      "message": "This is dangerous, because a user could be removed from a group in the company. However, until he logs in again with SAML Gerrit will still grant permissions to him as he were in that group.\n\nExamples:\n- User using an existing Gerrit session cookie\n- User connecting via SSH and thus not using SAML for authentication",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43d3ef56_5a2d3ff5",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1005133
      },
      "writtenOn": "2019-04-24T06:03:45Z",
      "side": 1,
      "message": "Luca, as far as I can see this is no different from any other attribute of the gerrit saml plugin.\n\nFor example if a user is disabled at the saml provider side, its ssh credentials keep being valid in gerrit.\n\nI do not see how the memberOfAttr extension makes this worse or better.  But I am probably missing something?",
      "parentUuid": "df1a8f34_17284c44",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37bb0f46_8e5e1441",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-04-24T06:37:04Z",
      "side": 1,
      "message": "\u003e Luca, as far as I can see this is no different from any other attribute of the gerrit saml plugin.\n\u003e \n\u003e For example if a user is disabled at the saml provider side, its ssh credentials keep being valid in gerrit.\n\nHere we are talking about something else: authorization.\nIf we consider the group membership *only* at login time, a user with a 1-week long session cannot have his authorization changed unless we force him to logout and login again.\n\n\u003e I do not see how the memberOfAttr extension makes this worse or better.  But I am probably missing something?\n\nSee above.",
      "parentUuid": "43d3ef56_5a2d3ff5",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a574ce5_dd94fabe",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1005133
      },
      "writtenOn": "2019-07-03T11:27:01Z",
      "side": 1,
      "message": "Hi Luca, for me this problem is an inherent problem of the SAML plugin.\nI do not think this patch changes this behaviour in any way.\n\nI do not see the difference, between a user which is manually added/authorized for a group and a user authorized using the memberOf attribute.\n\nIn both cases, if the user is disabled at the saml provider side, she can still (ab)use her access rights until the next time she logs in onto the ui.\n\nThe only solution I see around this problem is adding a time-out/refresh attribute.  So if an old user comes in over ssh he is forced to login on the ui before continuing.\n\nI think this is rather similar on how this site, gerrit-review.googlesource.com, does it for the connection to your google account.\n\nIf you think this makes sense, I am willing to look into how this could be implemented.",
      "parentUuid": "37bb0f46_8e5e1441",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03d77600_7161e19f",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-07-03T11:36:00Z",
      "side": 1,
      "message": "\u003e Hi Luca, for me this problem is an inherent problem of the SAML plugin.\n\u003e I do not think this patch changes this behaviour in any way.\n\nYes, you are right: it\u0027s just the way SAML works. It is quite usual for people using SAML to logout, clear cookies, login again and *only after that* see the permissions updated.\n\n\u003e I do not see the difference, between a user which is manually added/authorized for a group and a user authorized using the memberOf attribute.\n\nThe difference is that if you add (or remove) a user to a group in Gerrit, it will affect also the current sessions. If you do the same with SAML, it will require to re-authenticate from scratch so invalidate the current session and create a new token with a new memberOf.\n\nHowever, I see your previous point: that\u0027s the way SAML works, we can\u0027t do anything about it.\n\n\u003e In both cases, if the user is disabled at the saml provider side, she can still (ab)use her access rights until the next time she logs in onto the ui.\n\nYes, with the difference that if you do without SAML \"memberOf\" there is no abuse possible.\n\n\u003e The only solution I see around this problem is adding a time-out/refresh attribute.  So if an old user comes in over ssh he is forced to login on the ui before continuing.\n\nNobody raised it at the moment, we just need to properly document the limitations and security restrictions.\n\n\u003e I think this is rather similar on how this site, gerrit-review.googlesource.com, does it for the connection to your google account.\n\nDon\u0027t think so, as I believe they plug the Google Groups into Gerrit using an API.",
      "parentUuid": "0a574ce5_dd94fabe",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70f15799_8ba0108a",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1005133
      },
      "writtenOn": "2019-07-04T05:45:29Z",
      "side": 1,
      "message": "Luca,\n\nif I document this more clearly in this README.  So add enough disclaimers bot on the generic behaviour as on this specific behaviour.\n\nWould you then be willing to take in this patch?",
      "parentUuid": "03d77600_7161e19f",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fc71598_10db75d3",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-07-04T06:33:26Z",
      "side": 1,
      "message": "\u003e Luca,\n\u003e \n\u003e if I document this more clearly in this README.  So add enough disclaimers bot on the generic behaviour as on this specific behaviour.\n\u003e \n\u003e Would you then be willing to take in this patch?\n\nYes, AFAIK we can\u0027t do anything about the involved risks: we document them so that people are aware and can make an educated choice.\n\nThanks for contributing to the plugin :-) and looking forward to getting this change merged.",
      "parentUuid": "70f15799_8ba0108a",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae0c0e64_a6d7a700",
        "filename": "README.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1005133
      },
      "writtenOn": "2020-09-18T05:10:02Z",
      "side": 1,
      "message": "You are welcome",
      "parentUuid": "1fc71598_10db75d3",
      "range": {
        "startLine": 156,
        "startChar": 47,
        "endLine": 156,
        "endChar": 64
      },
      "revId": "ed390f086b71a1b57ad0e5cc12a5a2c6e0843754",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}