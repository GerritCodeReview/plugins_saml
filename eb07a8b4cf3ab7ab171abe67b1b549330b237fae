{
  "comments": [
    {
      "key": {
        "uuid": "14651f11_8ff36373",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-10-02T12:15:16Z",
      "side": 1,
      "message": "We usually don\u0027t change the license header in this project. Can you revert that change?",
      "range": {
        "startLine": 2,
        "startChar": 0,
        "endLine": 2,
        "endChar": 73
      },
      "revId": "eb07a8b4cf3ab7ab171abe67b1b549330b237fae",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de07b135_68ca44e6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1089090
      },
      "writtenOn": "2019-10-03T21:17:50Z",
      "side": 1,
      "message": "As a general rule I may not drop the copyright notice. This notice does not change the license. May I add this in a separate document only, e.g. AUTHORS?\n\ne.g. https://github.com/eventum/eventum/blob/master/AUTHORS",
      "parentUuid": "14651f11_8ff36373",
      "range": {
        "startLine": 2,
        "startChar": 0,
        "endLine": 2,
        "endChar": 73
      },
      "revId": "eb07a8b4cf3ab7ab171abe67b1b549330b237fae",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c73ae3c_19729a59",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 1
      },
      "lineNbr": 225,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-10-02T12:15:16Z",
      "side": 1,
      "message": "This looks lieke a hack to me. What is the canonical way to do it with Pac4j library? May be suggest a proposal to the pac4j library, to improve the situation here: [1]?\n\n* [1] https://github.com/pac4j/pac4j/blob/master/pac4j-core/src/main/java/org/pac4j/core/profile/BasicUserProfile.java#L243-L252",
      "range": {
        "startLine": 223,
        "startChar": 4,
        "endLine": 225,
        "endChar": 5
      },
      "revId": "eb07a8b4cf3ab7ab171abe67b1b549330b237fae",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c3c421a_4d6f3b14",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 1
      },
      "lineNbr": 225,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-10-03T10:49:09Z",
      "side": 1,
      "message": "Something what AbstractJwtProfile is doing seems like a better alternative: [1].\n\n  final Object audience \u003d getAttribute(JwtClaims.AUDIENCE);\n        if (audience instanceof String) {\n            return Collections.singletonList((String) audience);\n        } else if (audience instanceof String[]) {\n            return Arrays.asList((String[]) audience);\n        } else if (audience instanceof List) {\n            return (List\u003cString\u003e) audience;\n        } else {\n            return null;\n        }\n\nAnyway I wrote this issue upstream: [2].\n\n* [1] https://github.com/pac4j/pac4j/blob/3e54e2207c28aae78281d8f87b2cf5c2ded26926/pac4j-core/src/main/java/org/pac4j/core/profile/jwt/AbstractJwtProfile.java#L28-L39\n[2] https://github.com/pac4j/pac4j/issues/1406",
      "parentUuid": "9c73ae3c_19729a59",
      "range": {
        "startLine": 223,
        "startChar": 4,
        "endLine": 225,
        "endChar": 5
      },
      "revId": "eb07a8b4cf3ab7ab171abe67b1b549330b237fae",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8519d44c_948c08e7",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 1
      },
      "lineNbr": 225,
      "author": {
        "id": 1089090
      },
      "writtenOn": "2019-10-03T15:43:29Z",
      "side": 1,
      "message": "Thank you for submitting the issue. Let\u0027s see what they respond.\n\npac4j might return various types, List\u0027able or not. SAML attributes might have multiple values.\n\nWould it be better? Here I keep the old code and return canonical\nString.valueOf() on non-castable-to-List values?\n\nif (user.getAttribute(attrName) is instance of List) {\n // old code returns the very first item with get(0)\n ..\n} else {\n return String.valueOf(user.getAttribute(attrName));\n}",
      "parentUuid": "2c3c421a_4d6f3b14",
      "range": {
        "startLine": 223,
        "startChar": 4,
        "endLine": 225,
        "endChar": 5
      },
      "revId": "eb07a8b4cf3ab7ab171abe67b1b549330b237fae",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}