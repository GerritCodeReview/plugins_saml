{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ca2758c3_527658c5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-09-04T15:19:46Z",
      "side": 1,
      "message": "This is true for this plugin/application interaction, however SamlMembership still uses uses a header to pass the display name. According to the comments this is done for LDAP syncing. I don\u0027t know if this is an issue, but should we need to address it, it can be done in a separate change.\n\nAny concerns?",
      "revId": "b53e12e5e62c0660389f07bc9679a4218b512bce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1f5b016_ff3e39e8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-09-04T15:19:46Z",
      "side": 1,
      "message": "The test passes without setting the request context, but when running the app it\u0027s required. I suppose this is because we inject the same admin GerritApi instance. Anyway, this call isn\u0027t covered by regression.",
      "revId": "b53e12e5e62c0660389f07bc9679a4218b512bce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9426ce59_4630bc7e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-09-04T16:13:37Z",
      "side": 1,
      "message": "Can you maybe add a comment explaining why we need to make this call after the `doFilter`?\n\nJust to double check this means that:\n1. we will create the user with the wrong display name and then correct it\n2. every time the user will login, we will do this call\n\nRegarding 2: is the All-Users modified everytime or if display name is unchanged this translates in a noop?\n\nIn any case, I think it might not be a big deal since you don\u0027t normally logout when using SAML.",
      "revId": "b53e12e5e62c0660389f07bc9679a4218b512bce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3764531e_9b5670c5",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/saml/SamlWebFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-09-04T16:11:16Z",
      "side": 1,
      "message": "This call has to happen _after_ `doFilter`. This is because if we do it before, the user won\u0027t have been authenticated and their account will not be available.\n\nI originally had this in another branch, but that made it difficult to find the condition to trigger this call. Doing it here means it\u0027s done once after a successful login.",
      "revId": "b53e12e5e62c0660389f07bc9679a4218b512bce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}